---
import Baseof from '../layouts/Baseof.astro';
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../config';

// Use Astro.glob() to fetch all posts, and then sort them by date.
const posts = (await Astro.glob('./blog/*.{md,mdx}')).sort(
	(a, b) => new Date(b.frontmatter.pubDate).valueOf() - new Date(a.frontmatter.pubDate).valueOf()
);
---

<Baseof>
	<section>
		<ul>
			{posts.map((post) => (
				<li class="flex">
					<time class="flex-none basis-1/4" datetime={post.frontmatter.pubDate}>
						{new Date(post.frontmatter.pubDate).toLocaleDateString('vi-vn', {
							year: 'numeric',
							month: 'long',
							day: '2-digit',
						})}
					</time>
					<a href={post.url}>{post.frontmatter.title}</a>
				</li>
			))}
		</ul>
	</section>
</Baseof>
